---
title: Promesas
---

Imagina que eres un gran cantante y tus fanÃ¡ticos te piden constantemente tu prÃ³xima canciÃ³n. Te llenan de mensajes, gritos y emociÃ³n, pero aÃºn no estÃ¡ lista, y no quieres decepcionarlos. Entonces decides hacer una promesa: **"Les enviarÃ© la canciÃ³n tan pronto como estÃ© disponible"**. Para organizarte, creas una lista de suscripciÃ³n donde tus fans pueden registrar sus direcciones de correo electrÃ³nico.

Â¿QuÃ© pasa despuÃ©s?

1. Cuando la canciÃ³n estÃ© lista, todos los fans que se registraron recibirÃ¡n un correo con el enlace.
2. Si ocurre algÃºn problema (como un incendio en el estudio ðŸ”¥), tambiÃ©n se les notificarÃ¡, aunque sea para dar malas noticias.

Â¿QuiÃ©n gana con esto?

- **TÃº**: Ya no tienes que responder miles de mensajes de fans.
- **Ellos**: Se sienten tranquilos porque no se perderÃ¡n el estreno.

Ahora, llevemos esta analogÃ­a al mundo de la programaciÃ³n:

- El **cantante** es un "cÃ³digo productor": un bloque de cÃ³digo que realiza un trabajo que toma tiempo, como obtener datos desde un servidor.
- Los **fans** son "cÃ³digos consumidores": las funciones que necesitan ese resultado para continuar trabajando.
- La **lista de suscripciÃ³n** es la promesa: un objeto especial que conecta a ambos.

## Â¿CÃ³mo funciona una Promesa en JavaScript?

Una promesa es un objeto que representa un valor que puede estar disponible ahora, en el futuro o nunca. Tiene tres posibles estados:

1. **Pendiente**: El trabajo aÃºn estÃ¡ en proceso.
2. **Cumplida**: La tarea se completÃ³ con Ã©xito, y el resultado estÃ¡ listo.
3. **Rechazada**: OcurriÃ³ un error y no hay resultado.

Cuando creamos una promesa, necesitamos especificar dos funciones clave:

- `resolve`: Para indicar que todo saliÃ³ bien.
- `reject`: Para informar que ocurriÃ³ un problema.

## Sintaxis de una Promesa

```js
let promesa = new Promise(function (resolve, reject) {
  // CÃ³digo productor (el cantante)
});
```

#### Â¿QuÃ© hace este cÃ³digo?

1. Usamos el constructor `new Promise` para crear una promesa.
2. El constructor recibe una funciÃ³n llamada **ejecutor**, que se ejecuta inmediatamente cuando la promesa es creada.
3. El ejecutor contiene la tarea que queremos realizar (por ejemplo, descargar datos).
4. Cuando termina:
   - Si todo saliÃ³ bien, llamamos a `resolve(valor)`.
   - Si hubo un error, usamos `reject(error)`.

## Ejemplo bÃ¡sico: Una promesa que tarda 1 segundo en completarse

```js
let promesa = new Promise(function (resolve, reject) {
  console.log("Preparando la canciÃ³n... ðŸŽ¶");

  // Simulamos que el trabajo toma 1 segundo
  setTimeout(() => resolve("Â¡La canciÃ³n estÃ¡ lista!"), 1000);
});
```

#### Â¿QuÃ© pasa aquÃ­?

1. Cuando creamos la promesa, el mensaje "Preparando la canciÃ³n..." se muestra en la consola de inmediato.
2. DespuÃ©s de 1 segundo, llamamos a resolve(`"Â¡La canciÃ³n estÃ¡ lista!"`), cambiando el estado de la promesa a "**cumplida**".

Si quisieras manejar un error, el cÃ³digo serÃ­a similar:

```js
let promesa = new Promise(function (resolve, reject) {
  setTimeout(() => reject(new Error("Â¡Hubo un incendio en el estudio!")), 1000);
});
```

En este caso, despuÃ©s de 1 segundo, el estado de la promesa serÃ­a "rechazado", con un mensaje de error.

## Consumir una Promesa: Â¿CÃ³mo reciben los fans el resultado?

Cuando el trabajo estÃ¡ listo (o fallÃ³), necesitamos una forma de notificar a los "fans". Esto se hace con los mÃ©todos:

- `.then()`: Para manejar resultados exitosos.
- `.catch()`: Para manejar errores.
- `.finally()`: Para ejecutar algo sin importar si hubo Ã©xito o error.

#### Ejemplo prÃ¡ctico: Manejo de una promesa exitosa

```js
promesa.then((resultado) => {
  console.log(resultado); // "Â¡La canciÃ³n estÃ¡ lista!"
});
```

AquÃ­ estamos diciendo: "Cuando la promesa estÃ© lista, muÃ©strame el resultado".

#### Manejo de errores con `.catch()`

Si algo saliÃ³ mal, usamos `.catch()` para manejar el problema:

```js
promesa.catch((error) => {
  console.log("Error:", error.message);
});
```

Por ejemplo, si la promesa se rechazÃ³ con `reject(new Error("Â¡Hubo un incendio!"))`, el mensaje serÃ­a:

```
Error: Â¡Hubo un incendio!
```

#### Â¿QuÃ© hace `.finally()`?

Piensa en `.finally()` como el encargado de limpiar despuÃ©s de una fiesta ðŸŽ‰. No importa si la promesa fue exitosa o fallida, `.finally()` se ejecuta de todas formas.

Ejemplo con `.finally()`

```js
promesa
  .finally(() => console.log("El proceso terminÃ³, limpiando... ðŸ§¹"))
  .then((resultado) => console.log("Resultado:", resultado))
  .catch((error) => console.log("Error:", error.message));
```

Â¿QuÃ© hace este cÃ³digo?

1. `.finally()` siempre ejecuta "El proceso terminÃ³...".
2. Dependiendo del estado:
   - Si todo saliÃ³ bien, muestra el resultado.
   - Si hubo un error, muestra el mensaje de error.

## Â¿Por quÃ© usar Promesas?

Las promesas son muy Ãºtiles para trabajar con cÃ³digo asincrÃ³nico. Esto significa que podemos ejecutar tareas en segundo plano (como descargar datos) sin bloquear el resto del programa.

```js
fetch("https://api.example.com/data")
  .then((response) => response.json()) // Procesamos la respuesta
  .then((data) => console.log("Datos recibidos:", data)) // Mostramos los datos
  .catch((error) => console.error("Error al obtener los datos:", error)); // Manejamos errores
```
